{% import "macros/m_form.html" as m %}
{% extends "layout/base.html" %}
{% block title %}Login{% endblock %}
{% block body %}
<body class="full-viewp">
    {% include "layout/header.html" %}
    <section class="auth-login">
        <div>
            <h1 class="auth_title">Log in</h1>
        </div>
        {% with success = get_flashed_messages(category_filter=["success"]) %}
        {% if success %}
        <div class="auth_msg success">
            <ul>
                {% for message in success %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        {% endwith %}
        {% with error = get_flashed_messages(category_filter=["error"]) %}
            {% if error %}
            <div class="auth_msg error">
                <ul>
                    {% for message in error %}
                    <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        {% endwith %}
        <form method="post" action="{{ request.path }}">
            {{ form.csrf_token }}
            <div class="auth_field">
                {{ m.render_field(form.username) }}
            </div>
            <div class="auth_field">
                {{ m.render_field(form.password) }}
            </div>
            <input type="submit" class="primary-btn auth_btn" value="Log in">
        </form>
        <div class="auth_extra">
            New here?
            <a href="{{ url_for('signup') }}" class="pink">Sign up</a>
        </div>
    </section>
</body>
{% endblock %}